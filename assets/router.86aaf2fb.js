import{r as v,o as d,_ as l,y as b,n as H,j as o,b as s,a as U,N as z,W as _,a0 as $,O as J,a2 as S,R as K,c as y}from"./index.56e5b6aa.js";import{d as Q,M as X,C as F,a as Y,u as Z,I as N}from"./index.esm.7993f669.js";import{o as ee,p as ae,s as I,B as oe,y as re,z as se,q as ne,v as M,w as ie,d as te,C as le,M as q,T as W,f as ce,E as g,D as de,F as ue}from"./appRouter.7431dfab.js";import{R as L,N as pe}from"./404.8e95ad12.js";function me(e){return ae("MuiButton",e)}const xe=ee("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]),C=xe,ve=v.exports.createContext({}),ge=ve,he=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],fe=e=>{const{color:a,disableElevation:r,fullWidth:n,size:i,variant:t,classes:c}=e,p={root:["root",t,`${t}${d(a)}`,`size${d(i)}`,`${t}Size${d(i)}`,a==="inherit"&&"colorInherit",r&&"disableElevation",n&&"fullWidth"],label:["label"],startIcon:["startIcon",`iconSize${d(i)}`],endIcon:["endIcon",`iconSize${d(i)}`]},u=ie(p,me,c);return l({},c,u)},P=e=>l({},e.size==="small"&&{"& > *:nth-of-type(1)":{fontSize:18}},e.size==="medium"&&{"& > *:nth-of-type(1)":{fontSize:20}},e.size==="large"&&{"& > *:nth-of-type(1)":{fontSize:22}}),be=I(oe,{shouldForwardProp:e=>re(e)||e==="classes",name:"MuiButton",slot:"Root",overridesResolver:(e,a)=>{const{ownerState:r}=e;return[a.root,a[r.variant],a[`${r.variant}${d(r.color)}`],a[`size${d(r.size)}`],a[`${r.variant}Size${d(r.size)}`],r.color==="inherit"&&a.colorInherit,r.disableElevation&&a.disableElevation,r.fullWidth&&a.fullWidth]}})(({theme:e,ownerState:a})=>{var r,n;return l({},e.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":l({textDecoration:"none",backgroundColor:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:b(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},a.variant==="text"&&a.color!=="inherit"&&{backgroundColor:e.vars?`rgba(${e.vars.palette[a.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:b(e.palette[a.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},a.variant==="outlined"&&a.color!=="inherit"&&{border:`1px solid ${(e.vars||e).palette[a.color].main}`,backgroundColor:e.vars?`rgba(${e.vars.palette[a.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:b(e.palette[a.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},a.variant==="contained"&&{backgroundColor:(e.vars||e).palette.grey.A100,boxShadow:(e.vars||e).shadows[4],"@media (hover: none)":{boxShadow:(e.vars||e).shadows[2],backgroundColor:(e.vars||e).palette.grey[300]}},a.variant==="contained"&&a.color!=="inherit"&&{backgroundColor:(e.vars||e).palette[a.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[a.color].main}}),"&:active":l({},a.variant==="contained"&&{boxShadow:(e.vars||e).shadows[8]}),[`&.${C.focusVisible}`]:l({},a.variant==="contained"&&{boxShadow:(e.vars||e).shadows[6]}),[`&.${C.disabled}`]:l({color:(e.vars||e).palette.action.disabled},a.variant==="outlined"&&{border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`},a.variant==="outlined"&&a.color==="secondary"&&{border:`1px solid ${(e.vars||e).palette.action.disabled}`},a.variant==="contained"&&{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground})},a.variant==="text"&&{padding:"6px 8px"},a.variant==="text"&&a.color!=="inherit"&&{color:(e.vars||e).palette[a.color].main},a.variant==="outlined"&&{padding:"5px 15px",border:"1px solid currentColor"},a.variant==="outlined"&&a.color!=="inherit"&&{color:(e.vars||e).palette[a.color].main,border:e.vars?`1px solid rgba(${e.vars.palette[a.color].mainChannel} / 0.5)`:`1px solid ${b(e.palette[a.color].main,.5)}`},a.variant==="contained"&&{color:e.vars?e.vars.palette.text.primary:(r=(n=e.palette).getContrastText)==null?void 0:r.call(n,e.palette.grey[300]),backgroundColor:(e.vars||e).palette.grey[300],boxShadow:(e.vars||e).shadows[2]},a.variant==="contained"&&a.color!=="inherit"&&{color:(e.vars||e).palette[a.color].contrastText,backgroundColor:(e.vars||e).palette[a.color].main},a.color==="inherit"&&{color:"inherit",borderColor:"currentColor"},a.size==="small"&&a.variant==="text"&&{padding:"4px 5px",fontSize:e.typography.pxToRem(13)},a.size==="large"&&a.variant==="text"&&{padding:"8px 11px",fontSize:e.typography.pxToRem(15)},a.size==="small"&&a.variant==="outlined"&&{padding:"3px 9px",fontSize:e.typography.pxToRem(13)},a.size==="large"&&a.variant==="outlined"&&{padding:"7px 21px",fontSize:e.typography.pxToRem(15)},a.size==="small"&&a.variant==="contained"&&{padding:"4px 10px",fontSize:e.typography.pxToRem(13)},a.size==="large"&&a.variant==="contained"&&{padding:"8px 22px",fontSize:e.typography.pxToRem(15)},a.fullWidth&&{width:"100%"})},({ownerState:e})=>e.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${C.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${C.disabled}`]:{boxShadow:"none"}}),ye=I("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,a)=>{const{ownerState:r}=e;return[a.startIcon,a[`iconSize${d(r.size)}`]]}})(({ownerState:e})=>l({display:"inherit",marginRight:8,marginLeft:-4},e.size==="small"&&{marginLeft:-2},P(e))),Ne=I("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,a)=>{const{ownerState:r}=e;return[a.endIcon,a[`iconSize${d(r.size)}`]]}})(({ownerState:e})=>l({display:"inherit",marginRight:-4,marginLeft:8},e.size==="small"&&{marginRight:-2},P(e))),Ce=v.exports.forwardRef(function(a,r){const n=v.exports.useContext(ge),i=se(n,a),t=ne({props:i,name:"MuiButton"}),{children:c,color:p="primary",component:u="button",className:m,disabled:x=!1,disableElevation:T=!1,disableFocusRipple:R=!1,endIcon:k,focusVisibleClassName:O,fullWidth:w=!1,size:V="medium",startIcon:E,type:B,variant:j="text"}=t,A=H(t,he),f=l({},t,{color:p,component:u,disabled:x,disableElevation:T,disableFocusRipple:R,fullWidth:w,size:V,type:B,variant:j}),h=fe(f),D=E&&o(ye,{className:h.startIcon,ownerState:f,children:E}),G=k&&o(Ne,{className:h.endIcon,ownerState:f,children:k});return s(be,l({ownerState:f,className:M(n.className,h.root,m),component:u,disabled:x,focusRipple:!R,focusVisibleClassName:M(h.focusVisible,O),ref:r,type:B},A,{classes:h,children:[D,c,G]}))}),ze=Ce,$e=e=>{const[a,r]=v.exports.useState([]),n=()=>{if(!e.users)return r([]);const i=[];for(var t=0;t<e.users.length;t++){const p=e.users[t];for(var c=0;c<p.roles.length;c++){const u=p.roles[c];i.includes(u)||i.push(u)}}r(i)};return v.exports.useMemo(()=>{n()},[e.users]),s("div",{className:"rounded-md flex flex-row gap-8",children:[s("div",{className:"flex flex-row gap-4 items-center relative my-4 grow",children:[o("h3",{className:"mt-4 hidden","aria-hidden":!0,children:"Buscar"}),o("input",{type:"text",id:"query",placeholder:"Buscar",autoComplete:"off","aria-label":"Buscar",className:"outline outline-neutral-70 w-full mt-2 placeholder:text-neutral-50 pl-10",onChange:i=>e.dispatch({property:"query",value:i.currentTarget.value})}),o(Q,{className:"absolute left-2 mt-1 top-1/2 -translate-y-1/2"})]}),s("div",{className:"flex flex-col grow",children:[o("h3",{className:"mt-4",children:"Rol"}),o(X,{allOptions:a,selectedOptions:e.state.roles,onChange:i=>e.dispatch({property:"roles",value:i})})]})]})},Ie=e=>{const a=U();return s("tr",{className:"bg-surface-4 text-main rounded-lg cursor-pointer hover:bg-surface-5 hover:border-surface-1 hover:shadow-sm overflow-hidden",onClick:()=>a(e._id||e.id||""),children:[o("td",{className:"px-4 py-2",children:s("h3",{children:[e.name," ",e.lastName]})}),o("td",{className:"px-4 py-2",children:o("p",{children:e.email})}),o("td",{className:"px-4 py-2",children:o("p",{children:e.companyCode})}),o("td",{className:"px-4 py-2 image.pngpointer-events-none",children:o(F,{elements:e.roles,noMargin:!0})}),o("td",{className:"",children:o(z,{to:e.id||"",children:o(te,{color:"info"})})})]},e._id||e.id)},Re=e=>s("div",{className:"flex flex-col gap-4",children:[o("div",{className:"px-4 grid grid-cols-[minmax(max-content,_1fr)_minmax(max-content,_1fr)_minmax(max-content,_1fr)_minmax(min-content,_1fr)_1rem] gap-4 items-center pr-4"}),s("table",{className:"items-center border-spacing-y-2 border-separate",children:[o("thead",{children:s("tr",{className:"text-left",children:[o("th",{className:"px-4 py-2",children:"Nombre"}),o("th",{className:"px-4 py-2",children:"Correo"}),o("th",{className:"px-4 py-2",children:"Compa\xF1ia"}),o("th",{className:"px-4 py-2",children:"Roles"}),o("th",{})]})}),o("tbody",{children:e.users!==void 0&&e.users.map(a=>o(Ie,{...a},a.id))})]})]}),ke=(e,a)=>{switch(a.property){case"roles":return e.roles.includes(a.value)?{...e,roles:e.roles.filter(r=>r!=a.value)}:{...e,roles:[a.value,...e.roles]};case"query":return{...e,query:a.value};default:return console.error("Unkown action property"),{...e}}},Ee=()=>{const{users:e,loading:a,error:r}=le(),[n,i]=v.exports.useReducer(ke,{roles:[],query:""}),t=v.exports.useMemo(()=>{if(!e)return[];const c=n.query!="",p=n.roles.length>0,u=new RegExp(n.query,"ig");return e.filter(m=>(!p||m.roles.some(x=>n.roles.includes(x)))&&(!c||[[m.name,m.lastName].join(" "),m.roles.join(" "),m.companyCode].some(x=>x!==void 0&&u.test(x))))},[e,n.roles,n.query]);return s(_,{children:[s(q,{children:[s("div",{className:"px-8 py-4 bg-surface-5 mb-12 rounded-lg shadow-inner",children:[o(W,{cta:o(z,{to:"new",className:"block",children:o(ze,{variant:"contained",children:"Crear nuevo Usuario"})}),title:"Usuarios"}),o("div",{className:"-mt-8"}),o($e,{users:e,state:n,dispatch:i})]}),a?o($,{}):r?o(Y,{type:"error",title:"Error",message:r.toString()}):o(Re,{users:t})]}),o(J,{})]})},Be=()=>{const{register:e,handleSubmit:a}=Z();return s("form",{onSubmit:a(()=>{}),className:"flex flex-col gap-4",children:[o(N,{type:"text",name:"name",register:e,required:!0}),o(N,{type:"text",name:"lastName",register:e,required:!0,label:"Last Name"}),o(N,{type:"email",name:"email",register:e,required:!0}),o(N,{type:"text",name:"companyCode",register:e,label:"Company Code"}),o("input",{type:"submit",value:"Crear",className:"px-8 py-2 bg-blue rounded-md text-white cursor-pointer hover:bg-primary-40 mx-auto"})]})},Me=()=>s(q,{children:[s(L,{spacing:2,items:"center",wrap:!1,children:[o(z,{to:"../",className:"mb-8",children:o(ce,{})}),o("h1",{className:"mb-8 grow",children:"Nuevo Usuario"})]}),o(Be,{})]});function Ue(){const{id:e}=S();if(!e)return o(g,{message:"Missing assessment id"});const{stats:a,loading:r,error:n}=de(e);return a?r?o($,{}):n?o(g,{message:n.toString()}):s(L,{spacing:2,wrap:!0,children:[s("div",{className:"p-6 rounded-md",children:[o("h3",{className:"text-xl",children:a.premiumAssessments}),o("p",{children:"Ex\xE1menes comprados"})]}),s("div",{className:"p-6 rounded-md",children:[o("h3",{className:"text-xl",children:a.takenAssessments}),o("p",{children:"Ex\xE1menes tomados"})]})]}):o(g,{message:"No user"})}const _e=()=>{const e=U(),{id:a}=S();if(!a)return o(g,{message:"Missing assessment id"});const{user:r,loading:n,error:i}=ue(a);return r?n?o($,{}):i?o(g,{message:i.toString()}):s(_,{children:[o("div",{className:"fixed left-0 top-0 w-screen h-screen overflow-hidden bg-surface-1 bg-opacity-20 backdrop-blur-sm",onClick:()=>e("../")}),s("div",{className:"max-w-lg fixed right-0 top-0 h-screen bg-surface-5 px-8 py-16 z-10 overflow-y-auto animate-slide-left",children:[o(W,{title:r.name+" "+r.lastName,back:!0}),s("div",{className:"flex flex-col gap-6 mb-10",children:[s("div",{className:"flex flex-col gap-1 grow",children:[o("h2",{children:"Email"}),o("p",{children:r.email})]}),s("div",{className:"flex flex-col gap-1 grow",children:[o("h2",{children:"Company Code"}),o("p",{children:r.companyCode||"Sin c\xF3digo"})]}),s("div",{className:"flex flex-col gap-1 grow",children:[o("h2",{children:"Rol"}),o(F,{elements:r.roles})]})]}),o("div",{className:"flex flex-row gap-8",children:o("div",{className:"px-8 py-2 bg-blue rounded-md text-white cursor-pointer hover:bg-primary-40 mx-auto",children:"Reiniciar Contrase\xF1a"})}),o("h2",{className:"mt-12 mb-4",children:"Historial"}),o(Ue,{})]})]}):o(g,{message:"No user"})},Le=()=>s(K,{children:[o(y,{path:"",element:o(Ee,{}),children:o(y,{path:":id",element:o(_e,{})})}),o(y,{path:"new",element:o(Me,{})}),o(y,{path:"*",element:o(pe,{})})]});export{Le as default};
