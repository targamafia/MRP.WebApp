import{r as f,a as s,j as e,F as v,P as N}from"./index.29009275.js";import{S as w,M as C,C as _,B as q,a as R,u as U,I as h}from"./index.esm.7dc7dd27.js";import{d as F,M as y,T as b,e as j,E as x}from"./appRouter.de48be59.js";import{N as g,O as M,R as S,d as E,u as k,a as B,b as p,c as O}from"./404.709a9b3f.js";const L=r=>{const[a,t]=f.exports.useState([]),l=()=>{if(!r.users)return t([]);const n=[];for(var o=0;o<r.users.length;o++){const c=r.users[o];for(var i=0;i<c.roles.length;i++){const m=c.roles[i];n.includes(m)||n.push(m)}}t(n)};return f.exports.useMemo(()=>{l()},[r.users]),s("div",{className:"rounded-md flex flex-row gap-8",children:[s("div",{className:"flex flex-row gap-4 items-center relative my-4 grow",children:[e("h3",{className:"mt-4 hidden","aria-hidden":!0,children:"Buscar"}),e("input",{type:"text",id:"query",placeholder:"Buscar",autoComplete:"off","aria-label":"Buscar",className:"outline outline-neutral-70 w-full mt-2 placeholder:text-neutral-50 pl-10",onChange:n=>r.dispatch({property:"query",value:n.currentTarget.value})}),e(w,{className:"absolute left-2 mt-1 top-1/2 -translate-y-1/2"})]}),s("div",{className:"flex flex-col grow",children:[e("h3",{className:"mt-4",children:"Rol"}),e(C,{allOptions:a,selectedOptions:r.state.roles,onChange:n=>r.dispatch({property:"roles",value:n})})]})]})},I=r=>e(g,{to:`/users/${r.id}`,children:e("div",{className:"bg-surface-4 text-main hover:bg-surface-5 transition-colors duration-300 overflow-hidden outline outline-solid outline-surface-2 hover:outline-white hover:shadow-glow w-full py-2 px-4 ",children:s("div",{className:"grid grid-cols-[minmax(max-content,_1fr)_minmax(max-content,_1fr)_minmax(max-content,_1fr)_minmax(min-content,_1fr)_1rem] gap-4 items-center pr-4",children:[e("h3",{children:r.name+" "+r.lastName}),e("p",{children:r.email}),e("p",{children:r.companyCode}),e(_,{elements:r.roles,noMargin:!0}),e(F,{color:"info"})]})})}),T=r=>s("div",{className:"flex flex-col gap-4",children:[s("div",{className:"px-4 grid grid-cols-[minmax(max-content,_1fr)_minmax(max-content,_1fr)_minmax(max-content,_1fr)_minmax(min-content,_1fr)_1rem] gap-4 items-center pr-4",children:[e("h3",{children:"Nombre"}),e("p",{children:"Correo"}),e("p",{children:"Compa\xF1ia"}),e("p",{children:"Roles"})]}),e("div",{className:"flex flex-col gap-1",children:r.users!==void 0&&r.users.map(a=>e(I,{...a},a.id))})]}),z=(r=1,a=50)=>({users:[{name:"juan",lastName:"pancho",email:"juan@pancho.com",id:"1",roles:["superadmin"]},{name:"juan",lastName:"pancho",email:"juan@pancho.com",id:"1",roles:["superadmin"]}],error:void 0,loading:!1}),A=r=>({user:{name:"juan",lastName:"pancho",email:"juan@pancho.com",id:"1",roles:["superadmin"]},error:void 0,loading:!1}),P=(r,a)=>{switch(a.property){case"roles":return r.roles.includes(a.value)?{...r,roles:r.roles.filter(t=>t!=a.value)}:{...r,roles:[a.value,...r.roles]};case"query":return{...r,query:a.value};default:return console.error("Unkown action property"),{...r}}},$=()=>{const{users:r,loading:a,error:t}=z(),[l,n]=f.exports.useReducer(P,{roles:[],query:""}),o=f.exports.useMemo(()=>{if(!r)return[];const i=l.query!="",c=l.roles.length>0,m=new RegExp(l.query,"ig");return r.filter(d=>(!c||d.roles.some(u=>l.roles.includes(u)))&&(!i||[d.name,d.roles.join(" "),d.lastName].some(u=>u!==void 0&&m.test(u))))},[r,l.roles,l.query]);return s(v,{children:[s(y,{children:[e(b,{cta:e(g,{to:"new",className:"block",children:e(q,{variant:"contained",children:"Crear nuevo Usuario"})}),title:"Usuarios"}),e(L,{users:r,state:l,dispatch:n}),e("div",{className:"my-8"}),a?e(N,{}):t?e(R,{type:"error",title:"Error",message:t.toString()}):e(T,{users:o})]}),e(M,{})]})},D=()=>{const{register:r,handleSubmit:a}=U();return s("form",{onSubmit:a(()=>{}),className:"flex flex-col gap-4",children:[e(h,{type:"text",name:"name",register:r,required:!0}),e(h,{type:"text",name:"lastName",register:r,required:!0,label:"Last Name"}),e(h,{type:"email",name:"email",register:r,required:!0}),e(h,{type:"text",name:"companyCode",register:r,label:"Company Code"}),e("input",{type:"submit",value:"Crear",className:"px-8 py-2 bg-blue rounded-md text-white cursor-pointer hover:bg-primary-40 mx-auto"})]})},H=()=>s(y,{children:[s(S,{spacing:2,items:"center",wrap:!1,children:[e(g,{to:"../",className:"mb-8",children:e(j,{})}),e("h1",{className:"mb-8 grow",children:"Nuevo Usuario"})]}),e(D,{})]}),G=()=>{const{id:r}=E();if(!r)return e(x,{message:"Missing assessment id"});const{user:a,loading:t,error:l}=A(),n=k();return t?e(N,{}):l?e(x,{message:l.message}):s(v,{children:[e("div",{className:"fixed left-0 top-0 w-screen h-screen overflow-hidden bg-surface-1 bg-opacity-20 backdrop-blur-sm",onClick:()=>n("../")}),s("div",{className:"max-w-lg fixed right-0 top-0 h-screen bg-surface-5 px-8 py-16 z-10 overflow-y-auto",children:[e(b,{title:a.name+" "+a.lastName,back:!0}),s("div",{className:"flex flex-col gap-6 mb-10",children:[s("div",{className:"flex flex-col gap-1 grow",children:[e("h2",{children:"Email"}),e("p",{children:a.email})]}),s("div",{className:"flex flex-col gap-1 grow",children:[e("h2",{children:"Company Code"}),e("p",{children:a.companyCode||"Sin c\xF3digo"})]}),s("div",{className:"flex flex-col gap-1 grow",children:[e("h2",{children:"Rol"}),e("p",{children:a.roles})]})]}),e("div",{className:"flex flex-row gap-8",children:e("div",{className:"px-8 py-2 bg-blue rounded-md text-white cursor-pointer hover:bg-primary-40 mx-auto",children:"Reiniciar Contrase\xF1a"})}),e("h2",{className:"mt-12 mb-4",children:"Historial"})]})]})},W=()=>s(B,{children:[e(p,{path:"",element:e($,{}),children:e(p,{path:":id",element:e(G,{})})}),e(p,{path:"new",element:e(H,{})}),e(p,{path:"*",element:e(O,{})})]});export{W as default};
