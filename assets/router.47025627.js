import{r as P,i as T,a as j,E as b,u as _,M as O,T as N,d as H,b as K,I as q,c as W,e as G,A as J,f as X,g as Y}from"./appRouter.f0dbb165.js";import{j as e,P as w,a as i,F as p,r as d}from"./index.3b920f58.js";import{d as E,N as f,R as C,O as Z,u as D,a as ee,b as h,e as te,c as se}from"./404.2656d022.js";import{C as V,S as re,M as ae,B as ne,a as y,b as ie,u as U,I}from"./index.esm.1b57b995.js";var R={},le=T.exports;Object.defineProperty(R,"__esModule",{value:!0});var z=R.default=void 0,oe=le(P()),ce=j,de=(0,oe.default)((0,ce.jsx)("path",{d:"m14.06 9.02.92.92L5.92 19H5v-.92l9.06-9.06M17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29zm-3.6 3.19L3 17.25V21h3.75L17.81 9.94l-3.75-3.75z"}),"EditOutlined");z=R.default=de;const ue=()=>{const{id:t}=E();if(!t)return e(b,{message:"Missing assessment Id"});const{assessment:s,error:r,loading:l}=_(t);return e(O,{bgImg:s==null?void 0:s.thumbnailUrl,children:l?e(w,{}):r?e(b,{message:r.toString()}):s!==void 0?i(p,{children:[e("div",{className:"my-2 mb-4 sticky top-14 backdrop-blur-lg rounded-b-lg",children:e(N,{title:s.title,back:!0,cta:e(f,{to:"./edit",children:e(z,{})})})}),i(C,{spacing:4,className:"mb-8",items:"center",children:[e(f,{to:"./details",className:({isActive:a})=>(a?"bg-blue text-white rounded-md hover:text-white":"text-main hover:text-main")+" px-4 py-2",children:"Detalles"}),e(f,{to:"./questions",className:({isActive:a})=>(a?"bg-blue text-white rounded-md hover:text-white":"text-main hover:text-main")+" px-4 py-2",children:"Preguntas"}),e(f,{to:"./ratings",className:({isActive:a})=>(a?"bg-blue text-white rounded-md hover:text-white":"text-main hover:text-main")+" px-4 py-2",children:"Rese\xF1as"})]}),e(Z,{})]}):e(p,{})})},me=t=>e(f,{to:`/MRP.WebApp/assessments/${t.id}`,children:e("div",{className:"rounded-md bg-surface-4 text-main hover:bg-surface-5 transition-colors duration-300 overflow-hidden shadow-sm outline outline-solid outline-surface-2 hover:outline-white hover:shadow-glow w-full ",children:i("div",{className:"grid grid-cols-[minmax(2rem,8rem)_1fr_2rem] items-center pr-4",children:[t.thumbnailUrl!==void 0?e("img",{src:t.thumbnailUrl,className:"w-f self-stretch object-cover grow"}):e("div",{}),i("div",{className:"grow p-4 flex items-start self-start flex-col pointer-events-none",children:[t.categories!==void 0&&e(V,{elements:t.categories}),e("h3",{className:"text-3xl mb-2",children:t.title}),t.description!==void 0&&e("p",{className:"mb-4",children:t.description})]}),e(H,{color:"info"})]})})}),he=t=>e("div",{className:"flex flex-col gap-8",children:t.assessments!==void 0&&t.assessments.map(s=>e(me,{...s},s.id))}),ge=t=>{const[s,r]=d.exports.useState([]),l=()=>{if(!t.assessments)return r([]);const a=[];for(var n=0;n<t.assessments.length;n++){const o=t.assessments[n];for(var c=0;c<o.categories.length;c++){const u=o.categories[c];a.includes(u)||a.push(u)}}r(a)};return d.exports.useMemo(()=>{l()},[t.assessments]),i("div",{className:"max-w-xs rounded-md",children:[e("h2",{className:"mb-2",children:"Filtros"}),i("div",{className:"flex flex-row gap-4 items-center relative my-4",children:[e("h3",{className:"mt-4 hidden","aria-hidden":!0,children:"Buscar"}),e("input",{type:"text",id:"query",placeholder:"Buscar",autoComplete:"off","aria-label":"Buscar",className:"outline outline-neutral-70 w-full mt-2 placeholder:text-neutral-50 pl-10",onChange:a=>t.dispatch({property:"query",value:a.currentTarget.value})}),e(re,{className:"absolute left-2 mt-1 top-1/2 -translate-y-1/2"})]}),e("h3",{className:"mt-4",children:"Categor\xEDas"}),e(ae,{allOptions:s,selectedOptions:t.state.categories,onChange:a=>t.dispatch({property:"categories",value:a})})]})},pe=(t,s)=>{switch(s.property){case"categories":return t.categories.includes(s.value)?{...t,categories:t.categories.filter(r=>r!=s.value)}:{...t,categories:[s.value,...t.categories]};case"query":return{...t,query:s.value};default:return console.error("Unkown action property"),{...t}}},xe=()=>{const{assessments:t,loading:s,error:r}=K(),[l,a]=d.exports.useReducer(pe,{categories:[],query:""}),n=d.exports.useMemo(()=>{if(!t)return[];const c=l.query!="",o=l.categories.length>0,u=new RegExp(l.query,"ig");return t.filter(x=>(!o||x.categories.some(g=>l.categories.includes(g)))&&(!c||[x.title,x.categories.join(" "),x.description].some(g=>g!==void 0&&u.test(g))))},[t,l.categories,l.query]);return i(O,{sidebar:e(ge,{assessments:t,state:l,dispatch:a}),children:[e(N,{cta:e(f,{to:"new",className:"block",children:e(ne,{variant:"contained",children:"Crear nuevo Quiz"})}),title:"Quizes"}),s?e(w,{}):e(p,{}),r?e(y,{type:"error",title:"Error",message:r.toString()}):e(p,{}),!s&&!r?e(he,{assessments:n}):e(p,{})]})};var $={},fe=T.exports;Object.defineProperty($,"__esModule",{value:!0});var k=$.default=void 0,ve=fe(P()),be=j,ye=(0,ve.default)((0,be.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"AddOutlined");k=$.default=ye;const Ne=t=>{const s=d.exports.useRef(null),[r,l]=d.exports.useState([]),a=t.name[0].toLocaleUpperCase()+t.name.slice(1),n=()=>{s===null||s.current===null||(l([s.current.value.trim(),...r]),s.current.value="")},c=o=>{l(r.filter(u=>u!==o.value))};return d.exports.useEffect(()=>{t.setValue(t.name+"[]",r)},[r]),i("div",{className:"flex flex-col gap-4 w-full",children:[e("input",{type:"hidden",...t.register(t.name+"[]")}),i("div",{className:"flex flex-row gap-4 w-full items-end",children:[i("div",{className:"flex flex-col gap-1 grow",children:[i("label",{htmlFor:"multiselect",children:[a,":"]}),e("textarea",{onKeyUp:o=>{o.key=="Enter"&&(o.preventDefault(),n())},onSubmit:o=>{o.preventDefault(),n()},rows:1,className:"resize-none",placeholder:a,id:"multiselect",ref:s})]}),e(q,{"aria-label":"add",onClick:n,children:e(k,{color:"primary"})})]}),e(C,{spacing:4,children:r.map(o=>e(ie,{color:"primary",label:o,onDelete:()=>c({value:o})},o))})]})},we=()=>{const{register:t,handleSubmit:s,setValue:r,formState:l}=U(),[a,n]=d.exports.useState(),[c,o]=d.exports.useState(!1),u=D(),x=m=>{n({type:"info",content:`"${m.title}" se cre\xF3 exitosamente`}),o(!0),setTimeout(()=>u("../"),2e3)},g=m=>{n({type:"error",content:m})},{mutate:A,error:S,isLoading:M}=W(x,g),F=m=>{confirm(`\xBFCrear ${m.title}?`)&&A(m)};return i("form",{onSubmit:s(m=>F(m)),className:"text-left flex flex-col items-stretch gap-6 mb-16 relative",children:[!!S&&e(y,{type:"error",title:"Error",message:S.toString()}),a!==void 0&&e(y,{type:a.type,message:a.content,title:a.type=="error"?"Error":"\xC9xito"}),!c&&i("div",{className:"flex flex-col gap-4",children:[e(I,{type:"text",register:t,name:"title",required:!0}),e(I,{type:"textarea",register:t,name:"description"}),e(Ne,{register:t,name:"categories",setValue:r})]}),M?e(w,{}):e("input",{type:"submit",value:"Crear",disabled:!l.isValid&&!c,className:"px-8 py-2 bg-blue rounded-md text-white cursor-pointer hover:bg-primary-40 mx-auto"})]})},Ce=()=>i(O,{children:[i(C,{spacing:2,items:"center",wrap:!1,children:[e(f,{to:"../",className:"mb-8",children:e(G,{})}),e("h1",{className:"mb-8 grow",children:"Nuevo Quiz"})]}),e(we,{})]}),L=()=>{const{id:t}=E();if(!t)return e(b,{message:"Missing assessment Id"});const{assessment:s,error:r,loading:l}=_(t);return l?e(w,{}):r?e(b,{message:r.toString()}):s!==void 0?i(p,{children:[e(N,{title:"Detalles"}),e("h2",{children:"Categor\xEDas"}),s.categories!==void 0&&e(V,{elements:s.categories}),e("h2",{className:"mb-2",children:"Descripci\xF3n"}),e("p",{className:"mb-8",children:s.description!==void 0?s.description:"Sin descripci\xF3n"}),e("hr",{}),e("h2",{className:"mb-4",children:"Vista Previa"}),e("div",{className:"p-8 rounded-md bg-surface-2",children:e(J,{...s,id:t})})]}):e(p,{})},Se=()=>{var a;const{id:t}=E();if(!t)return e(b,{message:"Missing assessment Id"});const{assessment:s,error:r,loading:l}=_(t);return l?e(w,{}):r?e(b,{message:r.toString()}):i("div",{className:"flex flex-col gap-8",children:[e(N,{title:"Preguntas",cta:e(f,{to:"new",className:"bg-blue px-4 py-2 rounded-md text-white",children:"Agregar Pregunta"})}),s!==void 0?!!s.questions&&((a=s.questions)==null?void 0:a.length)>0?s.questions.map((n,c)=>i("div",{className:[n.correctOption?"bg-surface-5":"bg-surface-2","rounded-md p-4"].join(" "),children:[e("h3",{className:"mb-4 text-2xl font-bold",children:n.title}),n.options.map((o,u)=>i("div",{className:["p-2 flex flex-row gap-4",o.isCorrectAnswer?"text-orange":""].join(" "),children:[e("h4",{className:"w-6 text-xl font-bold",children:u+1}),o.value]},u))]},c)):e(y,{type:"info",title:"Oops, no hay preguntas",message:"Agrega una pregunta"}):e(y,{type:"error",title:"Oops, no encontr\xE9 ese quiz",message:"Intenta con otro"})]})},Ee=(t,s)=>{const r=t.slice();switch(s.type){case"add":return r.splice(r.length,0,{value:"",isCorrectAnswer:!1}),r;case"remove":if(s.index===void 0)throw"Missing index";return confirm(`Est\xE1s a punto de quitar la ${s.index+1} opci\xF3n`)?(r.splice(s.index,1),r):t;case"change":if(s.index===void 0)throw"Missing index";if(!s.item)throw"Missing item";return r.map((l,a)=>a!==s.index?{...l}:{...l,...s.item})}},Ae=t=>{const[s,r]=d.exports.useReducer(Ee,[]),l=(a,n)=>c=>{r({type:"change",index:a,item:n=="isCorrect"?{isCorrectAnswer:c.currentTarget.checked}:{value:c.currentTarget.value}})};return d.exports.useEffect(()=>{t.setValue("options[]",s)},[s]),e("div",{className:"mt-16",children:i(p,{children:[s.map((a,n)=>i("div",{className:"mb-8",children:[e("hr",{className:"mb-4"}),i(C,{spacing:4,className:"mb-4",children:[i("h4",{className:"grow w-6 text-2xl font-bold",children:["Opci\xF3n ",n+1,":"]}),e(q,{onClick:()=>r({type:"remove",index:n}),children:e(X,{})})]}),i(C,{spacing:4,grow:!0,children:[i("div",{className:"grow",children:[e("label",{htmlFor:`${n}-value`,className:"mb-2 block",children:"Respuesta"}),e("input",{id:`${n}-value`,type:"text",onChange:l(n,"value"),value:a.value,className:"grow w-full",autoComplete:"none"})]}),i("div",{children:[e("label",{htmlFor:`${n}-isCorrect`,className:"block",children:"Es Correcta"}),e("input",{id:`${n}-isCorrect`,type:"checkbox",onChange:l(n,"isCorrect"),defaultChecked:a.isCorrectAnswer})]})]})]},n)),e(q,{onClick:()=>r({type:"add"}),className:"!mx-auto !block",children:e(k,{})})]})})},Me=()=>{const{id:t}=E();if(!t)return e(b,{message:"Missing assessment id"});const{register:s,handleSubmit:r,setValue:l,formState:a}=U(),[n,c]=d.exports.useState(),o=D(),[u,x]=d.exports.useState("MULTIPLE_CHOICE"),[g,A]=d.exports.useState(!1),S=()=>{c({type:"info",content:"La pregunta se agreg\xF3 correctamente"}),A(!0),setTimeout(()=>o("../"),2e3)},M=v=>{c({type:"error",content:v})},{mutate:F,error:m,isLoading:B}=Y(t,S,M),Q=v=>{F([v])};return i("form",{onSubmit:r(v=>Q(v)),className:"text-left flex flex-col items-stretch gap-6 mb-16 relative",children:[e(N,{back:!0,title:"Nueva Pregunta"}),!!m&&e(y,{type:"error",title:"Error",message:m.toString()}),n!==void 0&&!m&&e(y,{type:n.type,message:n.content.toString(),title:n.type=="error"?"Error":"\xC9xito"}),!g&&i("div",{className:"flex flex-col gap-4",children:[e(I,{type:"text",register:s,name:"title",required:!0}),i("div",{className:"flex flex-col gap-1",children:[e("label",{htmlFor:"type",children:"Tipo:"}),i("select",{...s("type"),onChange:v=>x(v.currentTarget.value),children:[e("option",{value:"MULTIPLE_CHOICE",children:"Opci\xF3n M\xFAltiple"}),e("option",{value:"BOOLEAN",children:"S\xED o No"})]}),e("input",{type:"hidden",...s("options[]")}),u==="MULTIPLE_CHOICE"?e(Ae,{setValue:l}):e(p,{})]})]}),B?e(w,{}):e("input",{type:"submit",value:"Crear",disabled:!a.isValid&&!g,className:"px-8 py-2 bg-blue rounded-md text-white cursor-pointer hover:bg-primary-40 mx-auto"})]})},Oe=()=>i(ee,{children:[e(h,{path:"",element:e(xe,{})}),e(h,{path:"new",element:e(Ce,{})}),i(h,{path:":id",element:e(ue,{}),children:[e(h,{index:!0,element:e(L,{})}),e(h,{path:"details",element:e(L,{})}),i(h,{path:"questions",children:[e(h,{path:"",element:e(Se,{})}),e(h,{path:"new",element:e(Me,{})})]}),e(h,{path:"ratings",element:e(N,{title:"Rese\xF1as"})}),e(h,{path:"*",element:e(te,{to:"details"})})]}),e(h,{path:"*",element:e(se,{})})]});export{Oe as default};
