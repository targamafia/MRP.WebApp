import{r as ce,_ as ee,n as st,b as ie,j as _,o as Ne,y as St,N as it,x as Z}from"./index.19305bef.js";import{s as nt,t as at,v as Be,B as Vt,w as Dt,x as ot,y as lt,z as Ie,D as Et,F as Rt,r as Le,i as Pe,c as Me,h as Ot,G as Nt}from"./appRouter.268fca7c.js";import{R as Bt}from"./404.6162531c.js";const It=ce.exports.createContext(),Lt=It;function Pt(){return ce.exports.useContext(Lt)}function Mt(e){return nt("PrivateSwitchBase",e)}at("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const $t=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],Tt=e=>{const{classes:t,checked:r,disabled:o,edge:n}=e,l={root:["root",r&&"checked",o&&"disabled",n&&`edge${Ne(n)}`],input:["input"]};return lt(l,Mt,t)},Ut=Be(Vt)(({ownerState:e})=>ee({padding:9,borderRadius:"50%"},e.edge==="start"&&{marginLeft:e.size==="small"?-3:-12},e.edge==="end"&&{marginRight:e.size==="small"?-3:-12})),qt=Be("input")({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),zt=ce.exports.forwardRef(function(t,r){const{autoFocus:o,checked:n,checkedIcon:l,className:y,defaultChecked:g,disabled:k,disableFocusRipple:F=!1,edge:R=!1,icon:x,id:m,inputProps:U,inputRef:O,name:K,onBlur:G,onChange:L,onFocus:N,readOnly:z,required:C,tabIndex:re,type:J,value:H}=t,te=st(t,$t),[P,ne]=Dt({controlled:n,default:Boolean(g),name:"SwitchBase",state:"checked"}),v=Pt(),b=$=>{N&&N($),v&&v.onFocus&&v.onFocus($)},A=$=>{G&&G($),v&&v.onBlur&&v.onBlur($)},S=$=>{if($.nativeEvent.defaultPrevented)return;const ue=$.target.checked;ne(ue),L&&L($,ue)};let D=k;v&&typeof D>"u"&&(D=v.disabled);const M=J==="checkbox"||J==="radio",Q=ee({},t,{checked:P,disabled:D,disableFocusRipple:F,edge:R}),X=Tt(Q);return ie(Ut,ee({component:"span",className:ot(X.root,y),centerRipple:!0,focusRipple:!F,disabled:D,tabIndex:null,role:void 0,onFocus:b,onBlur:A,ownerState:Q,ref:r},te,{children:[_(qt,ee({autoFocus:o,checked:n,defaultChecked:g,className:X.input,disabled:D,id:M&&m,name:K,onChange:S,readOnly:z,ref:O,required:C,ownerState:Q,tabIndex:re,type:J},J==="checkbox"&&H===void 0?{}:{value:H},U)),P?l:x]}))}),jt=zt,Ht=Ie(_("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),Wt=Ie(_("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),Kt=Ie(_("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function Gt(e){return nt("MuiCheckbox",e)}const Jt=at("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary"]),Ce=Jt,Qt=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],Xt=e=>{const{classes:t,indeterminate:r,color:o}=e,n={root:["root",r&&"indeterminate",`color${Ne(o)}`]},l=lt(n,Gt,t);return ee({},t,l)},Yt=Be(jt,{shouldForwardProp:e=>Et(e)||e==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.indeterminate&&t.indeterminate,r.color!=="default"&&t[`color${Ne(r.color)}`]]}})(({theme:e,ownerState:t})=>ee({color:(e.vars||e).palette.text.secondary},!t.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${t.color==="default"?e.vars.palette.action.activeChannel:e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.hoverOpacity})`:St(t.color==="default"?e.palette.action.active:e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},t.color!=="default"&&{[`&.${Ce.checked}, &.${Ce.indeterminate}`]:{color:(e.vars||e).palette[t.color].main},[`&.${Ce.disabled}`]:{color:(e.vars||e).palette.action.disabled}})),Zt=_(Wt,{}),er=_(Ht,{}),tr=_(Kt,{}),rr=ce.exports.forwardRef(function(t,r){var o,n;const l=Rt({props:t,name:"MuiCheckbox"}),{checkedIcon:y=Zt,color:g="primary",icon:k=er,indeterminate:F=!1,indeterminateIcon:R=tr,inputProps:x,size:m="medium",className:U}=l,O=st(l,Qt),K=F?R:k,G=F?R:y,L=ee({},l,{color:g,indeterminate:F,size:m}),N=Xt(L);return _(Yt,ee({type:"checkbox",inputProps:ee({"data-indeterminate":F},x),icon:ce.exports.cloneElement(K,{fontSize:(o=K.props.fontSize)!=null?o:m}),checkedIcon:ce.exports.cloneElement(G,{fontSize:(n=G.props.fontSize)!=null?n:m}),ownerState:L,ref:r,className:ot(N.root,U)},O,{classes:N}))}),sr=rr;function zr(e){return _(it,{to:e.to,replace:!0,className:({isActive:t})=>["px-4 py-2 hover:bg-primary-60 text-main hover:text-white","rounded-md hover:scale-105 transition-transform",t?"!bg-blue text-white":""].join(" "),children:e.label})}var $e={},ir=Pe.exports;Object.defineProperty($e,"__esModule",{value:!0});var ct=$e.default=void 0,nr=ir(Le()),ar=Me,or=(0,nr.default)((0,ar.jsx)("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM9 6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9V6zm9 14H6V10h12v10zm-6-3c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2z"}),"LockOutlined");ct=$e.default=or;var Te={},lr=Pe.exports;Object.defineProperty(Te,"__esModule",{value:!0});var ut=Te.default=void 0,cr=lr(Le()),ur=Me,dr=(0,cr.default)((0,ur.jsx)("path",{d:"M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27z"}),"StarOutlined");ut=Te.default=dr;const fr=e=>_(it,{to:`/assessments/${e.id}`,children:_("div",{className:"rounded-md bg-surface-4 text-main hover:bg-surface-5 transition-all duration-300 overflow-hidden shadow-sm outline outline-solid outline-surface-2 hover:outline-white hover:shadow-glow w-full hover:translate-x-4 ",children:ie("div",{className:"grid grid-cols-[minmax(2rem,8rem)_1fr_2rem] items-center pr-4",children:[_("img",{src:e.thumbnailUrl||"/MRP.WebApp/placeholder.png",className:"w-f self-stretch object-cover grow"}),ie("div",{className:"grow p-4 flex items-start self-start flex-col pointer-events-none",children:[ie("div",{className:"flex flex-row",children:[e.isPrivate&&_(ct,{className:"mb-4"}),e.isPremium&&_(ut,{className:"mb-4 text-amber-400"})]}),e.categories!==void 0&&_(Ot,{elements:e.categories}),_("h3",{className:"text-3xl mb-2",children:e.title}),e.description!==void 0&&_("p",{className:"mb-4",children:e.description})]}),_(Nt,{color:"info"})]})})}),jr=e=>_("div",{className:"flex flex-col gap-8",children:e.assessments!==void 0&&e.assessments.map(t=>_(fr,{...t},t.id))}),Hr=e=>_("div",{className:"flex flex-col",children:e.allOptions.map(t=>ie(Bt,{spacing:2,items:"center",children:[_(sr,{checked:e.selectedOptions.includes(t),onChange:()=>{e.onChange(t)},className:"!text-main hover:scale-110 transition-transform"}),_("p",{children:t})]},t))});var Ue={},hr=Pe.exports;Object.defineProperty(Ue,"__esModule",{value:!0});var yr=Ue.default=void 0,gr=hr(Le()),vr=Me,mr=(0,gr.default)((0,vr.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),"SearchOutlined");yr=Ue.default=mr;const br=e=>{const t=e.label?e.label:e.name[0].toLocaleUpperCase()+e.name.slice(1);switch(e.type){case"textarea":return _("textarea",{...e.register(e.name,{required:e.required}),placeholder:t,id:e.name,rows:3,className:"resize-none",autoComplete:e.autocomplete});default:return _("input",{...e.register(e.name,{required:e.required}),type:e.type,placeholder:t,id:e.name,required:e.required,minLength:3,autoComplete:e.autocomplete})}},Wr=e=>{const t=e.label?e.label:e.name[0].toLocaleUpperCase()+e.name.slice(1),r=br(e);return ie("div",{className:"flex flex-col gap-1",children:[ie("label",{htmlFor:e.name,children:[t,":"]}),r]})};var fe=e=>e.type==="checkbox",oe=e=>e instanceof Date,I=e=>e==null;const dt=e=>typeof e=="object";var E=e=>!I(e)&&!Array.isArray(e)&&dt(e)&&!oe(e),xr=e=>E(e)&&e.target?fe(e.target)?e.target.checked:e.target.value:e,_r=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,kr=(e,t)=>e.has(_r(t)),he=e=>Array.isArray(e)?e.filter(Boolean):[],V=e=>e===void 0,f=(e,t,r)=>{if(!t||!E(e))return r;const o=he(t.split(/[,[\].]+?/)).reduce((n,l)=>I(n)?n:n[l],e);return V(o)||o===e?V(e[t])?r:e[t]:o};const Ge={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},j={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Y={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};Z.createContext(null);var wr=(e,t,r,o=!0)=>{const n={defaultValues:t._defaultValues};for(const l in e)Object.defineProperty(n,l,{get:()=>{const y=l;return t._proxyFormState[y]!==j.all&&(t._proxyFormState[y]=!o||j.all),r&&(r[y]=!0),e[y]}});return n},q=e=>E(e)&&!Object.keys(e).length,Fr=(e,t,r)=>{const{name:o,...n}=e;return q(n)||Object.keys(n).length>=Object.keys(t).length||Object.keys(n).find(l=>t[l]===(!r||j.all))},Ae=e=>Array.isArray(e)?e:[e];function Cr(e){const t=Z.useRef(e);t.current=e,Z.useEffect(()=>{const r=!e.disabled&&t.current.subject.subscribe({next:t.current.callback});return()=>{r&&r.unsubscribe()}},[e.disabled])}var W=e=>typeof e=="string",Ar=(e,t,r,o)=>{const n=Array.isArray(e);return W(e)?(o&&t.watch.add(e),f(r,e)):n?e.map(l=>(o&&t.watch.add(l),f(r,l))):(o&&(t.watchAll=!0),r)},ve=e=>typeof e=="function",ft=e=>{for(const t in e)if(ve(e[t]))return!0;return!1},pr=(e,t,r,o,n)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[o]:n||!0}}:{},qe=e=>/^\w*$/.test(e),ht=e=>he(e.replace(/["|']|\]/g,"").split(/\.|\[/));function w(e,t,r){let o=-1;const n=qe(t)?[t]:ht(t),l=n.length,y=l-1;for(;++o<l;){const g=n[o];let k=r;if(o!==y){const F=e[g];k=E(F)||Array.isArray(F)?F:isNaN(+n[o+1])?{}:[]}e[g]=k,e=e[g]}return e}const Ee=(e,t,r)=>{for(const o of r||Object.keys(e)){const n=f(e,o);if(n){const{_f:l,...y}=n;if(l&&t(l.name)){if(l.ref.focus){l.ref.focus();break}else if(l.refs&&l.refs[0].focus){l.refs[0].focus();break}}else E(y)&&Ee(y,t)}}};var Je=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(o=>e.startsWith(o)&&/^\.\w+/.test(e.slice(o.length)))),Sr=(e,t,r)=>{const o=he(f(e,r));return w(o,"root",t[r]),w(e,r,o),e},me=e=>typeof e=="boolean",ze=e=>e.type==="file",ge=e=>W(e)||Z.isValidElement(e),je=e=>e.type==="radio",be=e=>e instanceof RegExp;const Qe={value:!1,isValid:!1},Xe={value:!0,isValid:!0};var yt=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!V(e[0].attributes.value)?V(e[0].value)||e[0].value===""?Xe:{value:e[0].value,isValid:!0}:Xe:Qe}return Qe};const Ye={isValid:!1,value:null};var gt=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,Ye):Ye;function Ze(e,t,r="validate"){if(ge(e)||Array.isArray(e)&&e.every(ge)||me(e)&&!e)return{type:r,message:ge(e)?e:"",ref:t}}var ae=e=>E(e)&&!be(e)?e:{value:e,message:""},et=async(e,t,r,o,n)=>{const{ref:l,refs:y,required:g,maxLength:k,minLength:F,min:R,max:x,pattern:m,validate:U,name:O,valueAsNumber:K,mount:G,disabled:L}=e._f;if(!G||L)return{};const N=y?y[0]:l,z=v=>{o&&N.reportValidity&&(N.setCustomValidity(me(v)?"":v||" "),N.reportValidity())},C={},re=je(l),J=fe(l),H=re||J,te=(K||ze(l))&&!l.value||t===""||Array.isArray(t)&&!t.length,P=pr.bind(null,O,r,C),ne=(v,b,A,S=Y.maxLength,D=Y.minLength)=>{const M=v?b:A;C[O]={type:v?S:D,message:M,ref:l,...P(v?S:D,M)}};if(n?!Array.isArray(t)||!t.length:g&&(!H&&(te||I(t))||me(t)&&!t||J&&!yt(y).isValid||re&&!gt(y).isValid)){const{value:v,message:b}=ge(g)?{value:!!g,message:g}:ae(g);if(v&&(C[O]={type:Y.required,message:b,ref:N,...P(Y.required,b)},!r))return z(b),C}if(!te&&(!I(R)||!I(x))){let v,b;const A=ae(x),S=ae(R);if(!I(t)&&!isNaN(t)){const D=l.valueAsNumber||t&&+t;I(A.value)||(v=D>A.value),I(S.value)||(b=D<S.value)}else{const D=l.valueAsDate||new Date(t),M=$=>new Date(new Date().toDateString()+" "+$),Q=l.type=="time",X=l.type=="week";W(A.value)&&t&&(v=Q?M(t)>M(A.value):X?t>A.value:D>new Date(A.value)),W(S.value)&&t&&(b=Q?M(t)<M(S.value):X?t<S.value:D<new Date(S.value))}if((v||b)&&(ne(!!v,A.message,S.message,Y.max,Y.min),!r))return z(C[O].message),C}if((k||F)&&!te&&(W(t)||n&&Array.isArray(t))){const v=ae(k),b=ae(F),A=!I(v.value)&&t.length>v.value,S=!I(b.value)&&t.length<b.value;if((A||S)&&(ne(A,v.message,b.message),!r))return z(C[O].message),C}if(m&&!te&&W(t)){const{value:v,message:b}=ae(m);if(be(v)&&!t.match(v)&&(C[O]={type:Y.pattern,message:b,ref:l,...P(Y.pattern,b)},!r))return z(b),C}if(U){if(ve(U)){const v=await U(t),b=Ze(v,N);if(b&&(C[O]={...b,...P(Y.validate,b.message)},!r))return z(b.message),C}else if(E(U)){let v={};for(const b in U){if(!q(v)&&!r)break;const A=Ze(await U[b](t),N,b);A&&(v={...A,...P(b,A.message)},z(A.message),r&&(C[O]=v))}if(!q(v)&&(C[O]={ref:N,...v},!r))return C}}return z(!0),C},Vr=e=>{const t=e.constructor&&e.constructor.prototype;return E(t)&&t.hasOwnProperty("isPrototypeOf")},Re=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function se(e){let t;const r=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(Re&&(e instanceof Blob||e instanceof FileList))&&(r||E(e)))if(t=r?[]:{},!Array.isArray(e)&&!Vr(e))t=e;else for(const o in e)t[o]=se(e[o]);else return e;return t}var tt=e=>({isOnSubmit:!e||e===j.onSubmit,isOnBlur:e===j.onBlur,isOnChange:e===j.onChange,isOnAll:e===j.all,isOnTouch:e===j.onTouched});function Dr(e,t){const r=t.slice(0,-1).length;let o=0;for(;o<r;)e=V(e)?o++:e[t[o++]];return e}function Er(e){for(const t in e)if(!V(e[t]))return!1;return!0}function B(e,t){const r=qe(t)?[t]:ht(t),o=r.length==1?e:Dr(e,r),n=r[r.length-1];let l;o&&delete o[n];for(let y=0;y<r.slice(0,-1).length;y++){let g=-1,k;const F=r.slice(0,-(y+1)),R=F.length-1;for(y>0&&(l=e);++g<F.length;){const x=F[g];k=k?k[x]:e[x],R===g&&(E(k)&&q(k)||Array.isArray(k)&&Er(k))&&(l?delete l[x]:delete e[x]),l=k}}return e}function pe(){let e=[];return{get observers(){return e},next:n=>{for(const l of e)l.next(n)},subscribe:n=>(e.push(n),{unsubscribe:()=>{e=e.filter(l=>l!==n)}}),unsubscribe:()=>{e=[]}}}var xe=e=>I(e)||!dt(e);function le(e,t){if(xe(e)||xe(t))return e===t;if(oe(e)&&oe(t))return e.getTime()===t.getTime();const r=Object.keys(e),o=Object.keys(t);if(r.length!==o.length)return!1;for(const n of r){const l=e[n];if(!o.includes(n))return!1;if(n!=="ref"){const y=t[n];if(oe(l)&&oe(y)||E(l)&&E(y)||Array.isArray(l)&&Array.isArray(y)?!le(l,y):l!==y)return!1}}return!0}var Oe=e=>{const t=e?e.ownerDocument:0,r=t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement;return e instanceof r},vt=e=>e.type==="select-multiple",Rr=e=>je(e)||fe(e),Se=e=>Oe(e)&&e.isConnected;function _e(e,t={}){const r=Array.isArray(e);if(E(e)||r)for(const o in e)Array.isArray(e[o])||E(e[o])&&!ft(e[o])?(t[o]=Array.isArray(e[o])?[]:{},_e(e[o],t[o])):I(e[o])||(t[o]=!0);return t}function mt(e,t,r){const o=Array.isArray(e);if(E(e)||o)for(const n in e)Array.isArray(e[n])||E(e[n])&&!ft(e[n])?V(t)||xe(r[n])?r[n]=Array.isArray(e[n])?_e(e[n],[]):{..._e(e[n])}:mt(e[n],I(t)?{}:t[n],r[n]):r[n]=!le(e[n],t[n]);return r}var Ve=(e,t)=>mt(e,t,_e(t)),bt=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:o})=>V(e)?e:t?e===""?NaN:e&&+e:r&&W(e)?new Date(e):o?o(e):e;function De(e){const t=e.ref;if(!(e.refs?e.refs.every(r=>r.disabled):t.disabled))return ze(t)?t.files:je(t)?gt(e.refs).value:vt(t)?[...t.selectedOptions].map(({value:r})=>r):fe(t)?yt(e.refs).value:bt(V(t.value)?e.ref.value:t.value,e)}var Or=(e,t,r,o)=>{const n={};for(const l of e){const y=f(t,l);y&&w(n,l,y._f)}return{criteriaMode:r,names:[...e],fields:n,shouldUseNativeValidation:o}},de=e=>V(e)?void 0:be(e)?e.source:E(e)?be(e.value)?e.value.source:e.value:e,Nr=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function rt(e,t,r){const o=f(e,r);if(o||qe(r))return{error:o,name:r};const n=r.split(".");for(;n.length;){const l=n.join("."),y=f(t,l),g=f(e,l);if(y&&!Array.isArray(y)&&r!==l)return{name:r};if(g&&g.type)return{name:l,error:g};n.pop()}return{name:r}}var Br=(e,t,r,o,n)=>n.isOnAll?!1:!r&&n.isOnTouch?!(t||e):(r?o.isOnBlur:n.isOnBlur)?!e:(r?o.isOnChange:n.isOnChange)?e:!0,Ir=(e,t)=>!he(f(e,t)).length&&B(e,t);const Lr={mode:j.onSubmit,reValidateMode:j.onChange,shouldFocusError:!0};function Pr(e={}){let t={...Lr,...e},r={submitCount:0,isDirty:!1,isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},errors:{}},o={},n=se(t.defaultValues)||{},l=t.shouldUnregister?{}:se(n),y={action:!1,mount:!1,watch:!1},g={mount:new Set,unMount:new Set,array:new Set,watch:new Set},k,F=0,R={};const x={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},m={watch:pe(),array:pe(),state:pe()},U=tt(t.mode),O=tt(t.reValidateMode),K=t.criteriaMode===j.all,G=s=>i=>{clearTimeout(F),F=window.setTimeout(s,i)},L=async s=>{let i=!1;return x.isValid&&(i=t.resolver?q((await H()).errors):await P(o,!0),!s&&i!==r.isValid&&(r.isValid=i,m.state.next({isValid:i}))),i},N=(s,i=[],a,u,d=!0,c=!0)=>{if(u&&a){if(y.action=!0,c&&Array.isArray(f(o,s))){const h=a(f(o,s),u.argA,u.argB);d&&w(o,s,h)}if(x.errors&&c&&Array.isArray(f(r.errors,s))){const h=a(f(r.errors,s),u.argA,u.argB);d&&w(r.errors,s,h),Ir(r.errors,s)}if(x.touchedFields&&c&&Array.isArray(f(r.touchedFields,s))){const h=a(f(r.touchedFields,s),u.argA,u.argB);d&&w(r.touchedFields,s,h)}x.dirtyFields&&(r.dirtyFields=Ve(n,l)),m.state.next({isDirty:v(s,i),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else w(l,s,i)},z=(s,i)=>{w(r.errors,s,i),m.state.next({errors:r.errors})},C=(s,i,a,u)=>{const d=f(o,s);if(d){const c=f(l,s,V(a)?f(n,s):a);V(c)||u&&u.defaultChecked||i?w(l,s,i?c:De(d._f)):S(s,c),y.mount&&L()}},re=(s,i,a,u,d)=>{let c=!1;const h={name:s},p=f(r.touchedFields,s);if(x.isDirty){const T=r.isDirty;r.isDirty=h.isDirty=v(),c=T!==h.isDirty}if(x.dirtyFields&&(!a||u)){const T=f(r.dirtyFields,s);le(f(n,s),i)?B(r.dirtyFields,s):w(r.dirtyFields,s,!0),h.dirtyFields=r.dirtyFields,c=c||T!==f(r.dirtyFields,s)}return a&&!p&&(w(r.touchedFields,s,a),h.touchedFields=r.touchedFields,c=c||x.touchedFields&&p!==a),c&&d&&m.state.next(h),c?h:{}},J=async(s,i,a,u)=>{const d=f(r.errors,s),c=x.isValid&&r.isValid!==i;if(e.delayError&&a?(k=G(()=>z(s,a)),k(e.delayError)):(clearTimeout(F),k=null,a?w(r.errors,s,a):B(r.errors,s)),(a?!le(d,a):d)||!q(u)||c){const h={...u,...c?{isValid:i}:{},errors:r.errors,name:s};r={...r,...h},m.state.next(h)}R[s]--,x.isValidating&&!Object.values(R).some(h=>h)&&(m.state.next({isValidating:!1}),R={})},H=async s=>t.resolver?await t.resolver({...l},t.context,Or(s||g.mount,o,t.criteriaMode,t.shouldUseNativeValidation)):{},te=async s=>{const{errors:i}=await H();if(s)for(const a of s){const u=f(i,a);u?w(r.errors,a,u):B(r.errors,a)}else r.errors=i;return i},P=async(s,i,a={valid:!0})=>{for(const u in s){const d=s[u];if(d){const{_f:c,...h}=d;if(c){const p=g.array.has(c.name),T=await et(d,f(l,c.name),K,t.shouldUseNativeValidation,p);if(T[c.name]&&(a.valid=!1,i))break;!i&&(f(T,c.name)?p?Sr(r.errors,T,c.name):w(r.errors,c.name,T[c.name]):B(r.errors,c.name))}h&&await P(h,i,a)}}return a.valid},ne=()=>{for(const s of g.unMount){const i=f(o,s);i&&(i._f.refs?i._f.refs.every(a=>!Se(a)):!Se(i._f.ref))&&ke(s)}g.unMount=new Set},v=(s,i)=>(s&&i&&w(l,s,i),!le($(),n)),b=(s,i,a)=>{const u={...y.mount?l:V(i)?n:W(s)?{[s]:i}:i};return Ar(s,g,u,a)},A=s=>he(f(y.mount?l:n,s,e.shouldUnregister?f(n,s,[]):[])),S=(s,i,a={})=>{const u=f(o,s);let d=i;if(u){const c=u._f;c&&(!c.disabled&&w(l,s,bt(i,c)),d=Re&&Oe(c.ref)&&I(i)?"":i,vt(c.ref)?[...c.ref.options].forEach(h=>h.selected=d.includes(h.value)):c.refs?fe(c.ref)?c.refs.length>1?c.refs.forEach(h=>(!h.defaultChecked||!h.disabled)&&(h.checked=Array.isArray(d)?!!d.find(p=>p===h.value):d===h.value)):c.refs[0]&&(c.refs[0].checked=!!d):c.refs.forEach(h=>h.checked=h.value===d):ze(c.ref)?c.ref.value="":(c.ref.value=d,c.ref.type||m.watch.next({name:s})))}(a.shouldDirty||a.shouldTouch)&&re(s,d,a.shouldTouch,a.shouldDirty,!0),a.shouldValidate&&X(s)},D=(s,i,a)=>{for(const u in i){const d=i[u],c=`${s}.${u}`,h=f(o,c);(g.array.has(s)||!xe(d)||h&&!h._f)&&!oe(d)?D(c,d,a):S(c,d,a)}},M=(s,i,a={})=>{const u=f(o,s),d=g.array.has(s),c=se(i);w(l,s,c),d?(m.array.next({name:s,values:l}),(x.isDirty||x.dirtyFields)&&a.shouldDirty&&(r.dirtyFields=Ve(n,l),m.state.next({name:s,dirtyFields:r.dirtyFields,isDirty:v(s,c)}))):u&&!u._f&&!I(c)?D(s,c,a):S(s,c,a),Je(s,g)&&m.state.next({}),m.watch.next({name:s})},Q=async s=>{const i=s.target;let a=i.name;const u=f(o,a);if(u){let d,c;const h=i.type?De(u._f):xr(s),p=s.type===Ge.BLUR||s.type===Ge.FOCUS_OUT,T=!Nr(u._f)&&!t.resolver&&!f(r.errors,a)&&!u._f.deps||Br(p,f(r.touchedFields,a),r.isSubmitted,O,U),ye=Je(a,g,p);w(l,a,h),p?(u._f.onBlur&&u._f.onBlur(s),k&&k(0)):u._f.onChange&&u._f.onChange(s);const Fe=re(a,h,p,!1),At=!q(Fe)||ye;if(!p&&m.watch.next({name:a,type:s.type}),T)return At&&m.state.next({name:a,...ye?{}:Fe});if(!p&&ye&&m.state.next({}),R[a]=(R[a],1),m.state.next({isValidating:!0}),t.resolver){const{errors:We}=await H([a]),pt=rt(r.errors,o,a),Ke=rt(We,o,pt.name||a);d=Ke.error,a=Ke.name,c=q(We)}else d=(await et(u,f(l,a),K,t.shouldUseNativeValidation))[a],c=await L(!0);u._f.deps&&X(u._f.deps),J(a,c,d,Fe)}},X=async(s,i={})=>{let a,u;const d=Ae(s);if(m.state.next({isValidating:!0}),t.resolver){const c=await te(V(s)?s:d);a=q(c),u=s?!d.some(h=>f(c,h)):a}else s?(u=(await Promise.all(d.map(async c=>{const h=f(o,c);return await P(h&&h._f?{[c]:h}:h)}))).every(Boolean),!(!u&&!r.isValid)&&L()):u=a=await P(o);return m.state.next({...!W(s)||x.isValid&&a!==r.isValid?{}:{name:s},...t.resolver||!s?{isValid:a}:{},errors:r.errors,isValidating:!1}),i.shouldFocus&&!u&&Ee(o,c=>c&&f(r.errors,c),s?d:g.mount),u},$=s=>{const i={...n,...y.mount?l:{}};return V(s)?i:W(s)?f(i,s):s.map(a=>f(i,a))},ue=(s,i)=>({invalid:!!f((i||r).errors,s),isDirty:!!f((i||r).dirtyFields,s),isTouched:!!f((i||r).touchedFields,s),error:f((i||r).errors,s)}),xt=s=>{s?Ae(s).forEach(i=>B(r.errors,i)):r.errors={},m.state.next({errors:r.errors})},_t=(s,i,a)=>{const u=(f(o,s,{_f:{}})._f||{}).ref;w(r.errors,s,{...i,ref:u}),m.state.next({name:s,errors:r.errors,isValid:!1}),a&&a.shouldFocus&&u&&u.focus&&u.focus()},kt=(s,i)=>ve(s)?m.watch.subscribe({next:a=>s(b(void 0,i),a)}):b(s,i,!0),ke=(s,i={})=>{for(const a of s?Ae(s):g.mount)g.mount.delete(a),g.array.delete(a),f(o,a)&&(i.keepValue||(B(o,a),B(l,a)),!i.keepError&&B(r.errors,a),!i.keepDirty&&B(r.dirtyFields,a),!i.keepTouched&&B(r.touchedFields,a),!t.shouldUnregister&&!i.keepDefaultValue&&B(n,a));m.watch.next({}),m.state.next({...r,...i.keepDirty?{isDirty:v()}:{}}),!i.keepIsValid&&L()},we=(s,i={})=>{let a=f(o,s);const u=me(i.disabled);return w(o,s,{...a||{},_f:{...a&&a._f?a._f:{ref:{name:s}},name:s,mount:!0,...i}}),g.mount.add(s),a?u&&w(l,s,i.disabled?void 0:f(l,s,De(a._f))):C(s,!0,i.value),{...u?{disabled:i.disabled}:{},...t.shouldUseNativeValidation?{required:!!i.required,min:de(i.min),max:de(i.max),minLength:de(i.minLength),maxLength:de(i.maxLength),pattern:de(i.pattern)}:{},name:s,onChange:Q,onBlur:Q,ref:d=>{if(d){we(s,i),a=f(o,s);const c=V(d.value)&&d.querySelectorAll&&d.querySelectorAll("input,select,textarea")[0]||d,h=Rr(c),p=a._f.refs||[];if(h?p.find(T=>T===c):c===a._f.ref)return;w(o,s,{_f:{...a._f,...h?{refs:[...p.filter(Se),c,...Array.isArray(f(n,s))?[{}]:[]],ref:{type:c.type,name:s}}:{ref:c}}}),C(s,!1,void 0,c)}else a=f(o,s,{}),a._f&&(a._f.mount=!1),(t.shouldUnregister||i.shouldUnregister)&&!(kr(g.array,s)&&y.action)&&g.unMount.add(s)}}},He=()=>t.shouldFocusError&&Ee(o,s=>s&&f(r.errors,s),g.mount),wt=(s,i)=>async a=>{a&&(a.preventDefault&&a.preventDefault(),a.persist&&a.persist());let u=!0,d=se(l);m.state.next({isSubmitting:!0});try{if(t.resolver){const{errors:c,values:h}=await H();r.errors=c,d=h}else await P(o);q(r.errors)?(m.state.next({errors:{},isSubmitting:!0}),await s(d,a)):(i&&await i({...r.errors},a),He())}catch(c){throw u=!1,c}finally{r.isSubmitted=!0,m.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:q(r.errors)&&u,submitCount:r.submitCount+1,errors:r.errors})}},Ft=(s,i={})=>{f(o,s)&&(V(i.defaultValue)?M(s,f(n,s)):(M(s,i.defaultValue),w(n,s,i.defaultValue)),i.keepTouched||B(r.touchedFields,s),i.keepDirty||(B(r.dirtyFields,s),r.isDirty=i.defaultValue?v(s,f(n,s)):v()),i.keepError||(B(r.errors,s),x.isValid&&L()),m.state.next({...r}))},Ct=(s,i={})=>{const a=s||n,u=se(a),d=s&&!q(s)?u:n;if(i.keepDefaultValues||(n=a),!i.keepValues){if(i.keepDirtyValues)for(const c of g.mount)f(r.dirtyFields,c)?w(d,c,f(l,c)):M(c,f(d,c));else{if(Re&&V(s))for(const c of g.mount){const h=f(o,c);if(h&&h._f){const p=Array.isArray(h._f.refs)?h._f.refs[0]:h._f.ref;try{if(Oe(p)){p.closest("form").reset();break}}catch{}}}o={}}l=e.shouldUnregister?i.keepDefaultValues?se(n):{}:u,m.array.next({values:d}),m.watch.next({values:d})}g={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},y.mount=!x.isValid||!!i.keepIsValid,y.watch=!!e.shouldUnregister,m.state.next({submitCount:i.keepSubmitCount?r.submitCount:0,isDirty:i.keepDirty||i.keepDirtyValues?r.isDirty:!!(i.keepDefaultValues&&!le(s,n)),isSubmitted:i.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:i.keepDirty||i.keepDirtyValues?r.dirtyFields:i.keepDefaultValues&&s?Ve(n,s):{},touchedFields:i.keepTouched?r.touchedFields:{},errors:i.keepErrors?r.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})};return{control:{register:we,unregister:ke,getFieldState:ue,_executeSchema:H,_focusError:He,_getWatch:b,_getDirty:v,_updateValid:L,_removeUnmounted:ne,_updateFieldArray:N,_getFieldArray:A,_subjects:m,_proxyFormState:x,get _fields(){return o},get _formValues(){return l},get _stateFlags(){return y},set _stateFlags(s){y=s},get _defaultValues(){return n},get _names(){return g},set _names(s){g=s},get _formState(){return r},set _formState(s){r=s},get _options(){return t},set _options(s){t={...t,...s}}},trigger:X,register:we,handleSubmit:wt,watch:kt,setValue:M,getValues:$,reset:(s,i)=>Ct(ve(s)?s(l):s,i),resetField:Ft,clearErrors:xt,unregister:ke,setError:_t,setFocus:(s,i={})=>{const a=f(o,s),u=a&&a._f;if(u){const d=u.refs?u.refs[0]:u.ref;d.focus&&(d.focus(),i.shouldSelect&&d.select())}},getFieldState:ue}}function Kr(e={}){const t=Z.useRef(),[r,o]=Z.useState({isDirty:!1,isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},errors:{},defaultValues:e.defaultValues});t.current||(t.current={...Pr(e),formState:r});const n=t.current.control;return n._options=e,Cr({subject:n._subjects.state,callback:Z.useCallback(l=>{Fr(l,n._proxyFormState,!0)&&(n._formState={...n._formState,...l},o({...n._formState}))},[n])}),Z.useEffect(()=>{n._stateFlags.mount||(n._proxyFormState.isValid&&n._updateValid(),n._stateFlags.mount=!0),n._stateFlags.watch&&(n._stateFlags.watch=!1,n._subjects.state.next({})),n._removeUnmounted()}),Z.useEffect(()=>{r.submitCount&&n._focusError()},[n,r.submitCount]),t.current.formState=wr(r,n),t.current}export{jr as A,Wr as I,Hr as M,zr as N,ut as a,yr as b,ct as d,Kr as u};
